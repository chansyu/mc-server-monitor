{{define "title"}}Home{{end}}
{{define "main"}}
<main hx-boost="true" hx-push-url="false" hx-swap="afterbegin" hx-indicator=".htmx-indicator" hx-headers='{"X-CSRF-Token": "{{ .CSRFToken }}"}'>
    <section class="flex w-full flex-col">
        <h3 class="text-2xl font-bold">Actions</h3>
        <div class="flex justify-center space-x-4">
            <button class="btn" hx-post="/start"
            hx-target="#response-log"
            >
            Start
            </button>
            <button class="btn" hx-post="/stop"
                    hx-target="#response-log">
            Stop
            </button>
            <button class="btn" hx-post="/restart"
                    hx-target="#response-log">
            Restart
            </button>
        </div>
        <div class="divider"></div>
        <div class="flex justify-center space-x-4">
            <button class="btn" hx-get="/status"
                hx-target="#response-log">
            Status
            </button>
            <button class="btn" hx-get="/seed"
                    hx-target="#response-log">
            Seed
            </button>
            <button class="btn" hx-get="/players"
                    hx-target="#response-log">
            Players
            </button>
        </div>
        <form action="/message" method="post" hx-target="#response-log">
            <fieldset> 
                <legend class="text-lg">Message</legend>
                <div class="join join-vertical sm:join-horizontal">
                    <label class="mr-2" for="user">To:</label>
                    <select class="select select-bordered join-item"id="user" name="user">
                            <option value="All Players">All Players</option>
                            {{range .Players}}
                            <option value="{{.}}">{{.}}</option>
                            {{end}}
                    </select>
                    <input class="join-item" id="message" type="text" name="message"/>
                    <input class="btn join-item" type="submit" value="Message"/>
                </div>
            </fieldset>
        </form>
    </section>
    <section>
        <h3 class="text-2xl font-bold py-2">Responses <span class="htmx-indicator loading loading-spinner loading-md"></span></h3>
        <div class="overflow-x-auto overflow-y-auto max-h-72 md:max-h-96">
            <table class="table table-pin-rows">
                <thead>
                    <tr>
                        <th>Command</th>
                        <th>Time</th>
                        <th>Status</th>
                        <th>Message</th>
                    </tr>
                </thead>
                <tbody id="response-log">
                    
                </tbody>
            </table>
        </div>
    </section>
</main>
{{end}}